# çœŸæœºæµ‹è¯•é—®é¢˜ä¿®å¤æŒ‡å—

## âœ… å·²å®Œæˆçš„ä¿®å¤

1. âœ… æ¸…é™¤äº† `.env` æ–‡ä»¶çš„æ‰©å±•å±æ€§
2. âœ… æ¸…é™¤äº† Expo ç¼“å­˜
3. âœ… æ¸…é™¤äº† node_modules ç¼“å­˜

---

## ğŸš€ ç°åœ¨ç«‹å³æµ‹è¯•ï¼ˆæ¨èä½¿ç”¨ Expo Goï¼‰

### æ­¥éª¤ 1ï¼šå¯åŠ¨ API æœåŠ¡å™¨

åœ¨**ç»ˆç«¯ 1** ä¸­è¿è¡Œï¼š

```bash
cd /Users/ming/Documents/take-a-break/services/api
HOST=0.0.0.0 PORT=3333 pnpm run dev
```

ç­‰å¾…çœ‹åˆ°ï¼š
```
API listening on http://0.0.0.0:3333
```

---

### æ­¥éª¤ 2ï¼šå¯åŠ¨ç§»åŠ¨åº”ç”¨ï¼ˆæ¸…é™¤ç¼“å­˜ï¼‰

åœ¨**ç»ˆç«¯ 2** ä¸­è¿è¡Œï¼š

```bash
cd /Users/ming/Documents/take-a-break/apps/mobile
pnpm run dev --clear
```

ç­‰å¾…çœ‹åˆ°äºŒç»´ç å’Œç±»ä¼¼è¾“å‡ºï¼š
```
â€º Metro waiting on exp://192.168.1.19:8081
â€º Scan the QR code above with Expo Go
```

---

### æ­¥éª¤ 3ï¼šæ‰«æäºŒç»´ç 

**åœ¨ iPhone ä¸Šï¼š**

1. æ‰“å¼€ **Expo Go** åº”ç”¨ï¼ˆå¦‚æœæ²¡å®‰è£…ï¼Œå» App Store ä¸‹è½½ï¼‰
2. ç‚¹å‡» **"Scan QR Code"**
3. æ‰«æç»ˆç«¯æ˜¾ç¤ºçš„äºŒç»´ç 

**æˆ–è€…ç”¨ç›¸æœºï¼š**
- æ‰“å¼€ iPhone è‡ªå¸¦ç›¸æœº
- å¯¹å‡†äºŒç»´ç 
- ç‚¹å‡»å¼¹å‡ºçš„ "åœ¨ Expo Go ä¸­æ‰“å¼€" é€šçŸ¥

---

### æ­¥éª¤ 4ï¼šå¦‚æœè¿˜æ˜¯æ˜¾ç¤ºé”™è¯¯

#### æ–¹æ¡ˆ Aï¼šæ‰‹åŠ¨è¾“å…¥ URL

åœ¨ Expo Go ä¸­ï¼š
1. é€‰æ‹© **"Enter URL manually"**
2. è¾“å…¥ï¼š`exp://192.168.1.19:8081`
3. æŒ‰ Go

#### æ–¹æ¡ˆ Bï¼šä½¿ç”¨éš§é“æ¨¡å¼ï¼ˆTunnelï¼‰

å¦‚æœå±€åŸŸç½‘è¿æ¥æœ‰é—®é¢˜ï¼Œä½¿ç”¨éš§é“ï¼š

```bash
# åœ¨ç»ˆç«¯ 2 ä¸­ï¼ŒæŒ‰ Ctrl+C åœæ­¢å½“å‰æœåŠ¡
# ç„¶åè¿è¡Œï¼š
cd /Users/ming/Documents/take-a-break/apps/mobile
pnpm run dev --tunnel
```

è¿™ä¼šåˆ›å»ºä¸€ä¸ªå…¬ç½‘ URLï¼Œä¸ä¾èµ–å±€åŸŸç½‘ã€‚

---

## ğŸ”§ è§£å†³ Bundle Identifier é—®é¢˜ï¼ˆå¦‚éœ€æœ¬åœ°æ„å»ºï¼‰

ä½ ä¹‹å‰çœ‹åˆ°çš„é”™è¯¯ï¼š
```
error: The app identifier "com.takeabreak.app" cannot be registered
```

è¿™æ˜¯å› ä¸º `com.takeabreak.app` å·²è¢«å ç”¨ã€‚éœ€è¦æ›´æ”¹ Bundle IDï¼š

### ä¿®æ”¹ Bundle Identifierï¼š

1. **ä¿®æ”¹ app.json**

ç¼–è¾‘ `apps/mobile/app.json`ï¼Œå°†ï¼š
```json
"bundleIdentifier": "com.takeabreak.app"
```

æ”¹ä¸ºï¼ˆä½¿ç”¨ä½ è‡ªå·±çš„å”¯ä¸€æ ‡è¯†ï¼‰ï¼š
```json
"bundleIdentifier": "com.yourname.takeabreak"
```

ä¾‹å¦‚ï¼š
```json
"bundleIdentifier": "com.ming.takeabreak"
```

2. **åŒæ—¶ä¿®æ”¹ Android package name**

åœ¨åŒä¸€æ–‡ä»¶ä¸­ï¼Œå°†ï¼š
```json
"package": "com.takeabreak.app"
```

æ”¹ä¸ºï¼š
```json
"package": "com.ming.takeabreak"
```

3. **é‡æ–°ç”ŸæˆåŸç”Ÿä»£ç **

```bash
cd /Users/ming/Documents/take-a-break/apps/mobile
rm -rf ios android
npx expo prebuild --clean
```

---

## ğŸ“± æ¨èï¼šä½¿ç”¨ Expo Goï¼ˆæœ€ç®€å•ï¼‰

**ä¼˜ç‚¹ï¼š**
- âœ… æ— éœ€ Apple Developer è´¦å·
- âœ… æ— éœ€é…ç½® Bundle ID
- âœ… æ— éœ€æ„å»ºåŸç”Ÿä»£ç 
- âœ… æ”¯æŒçƒ­æ›´æ–°ï¼Œä¿®æ”¹ä»£ç ç«‹å³ç”Ÿæ•ˆ

**ç¼ºç‚¹ï¼š**
- âŒ æ— æ³•ä½¿ç”¨æŸäº›åŸç”Ÿæ¨¡å—ï¼ˆä½†ä½ çš„é¡¹ç›®åŸºæœ¬éƒ½æ”¯æŒï¼‰

å¯¹äºå¼€å‘å’Œæµ‹è¯•ï¼Œ**å¼ºçƒˆæ¨èä½¿ç”¨ Expo Go**ï¼

---

## âœ… éªŒè¯æˆåŠŸçš„æ ‡å¿—

### åœ¨ç»ˆç«¯ 2 ä¸­åº”è¯¥çœ‹åˆ°ï¼š

```
LOG [MapService] Using explicit API base URL: http://192.168.1.19:3333
LOG [MapService] Device location obtained: {
  "lat": 40.7829,    â† çº½çº¦åæ ‡
  "lng": -73.9654,
  "accuracy": 5
}
LOG [MapService] Found 12 nearby places
```

### åœ¨ iPhone ä¸Šåº”è¯¥çœ‹åˆ°ï¼š

- âœ… åº”ç”¨æ­£å¸¸åŠ è½½
- âœ… åœ°å›¾æ˜¾ç¤ºä½ çš„ä½ç½®
- âœ… æ˜¾ç¤ºé™„è¿‘çš„çœŸå®åœ°ç‚¹
- âœ… å¯ä»¥ç‚¹å‡»ã€å¯¼èˆªç­‰äº¤äº’

---

## ğŸ” æ•…éšœæ’é™¤æ¸…å•

### é—®é¢˜ï¼šExpo Go æ˜¾ç¤º "There was a problem"

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ£€æŸ¥ç½‘ç»œ**
   ```bash
   # åœ¨ iPhone æµè§ˆå™¨ä¸­è®¿é—®ï¼š
   http://192.168.1.19:8081
   # åº”è¯¥çœ‹åˆ° Metro bundler é¡µé¢
   ```

2. **é‡å¯ Metro**
   ```bash
   # ç»ˆç«¯ 2 ä¸­æŒ‰ Ctrl+Cï¼Œç„¶åï¼š
   cd apps/mobile
   pnpm run dev --clear
   ```

3. **æ£€æŸ¥é˜²ç«å¢™**
   - ç³»ç»Ÿè®¾ç½® â†’ å®‰å…¨æ€§ä¸éšç§ â†’ é˜²ç«å¢™
   - å¦‚æœå¼€å¯ï¼Œæ·»åŠ ç«¯å£ 8081 çš„ä¾‹å¤–

4. **ä½¿ç”¨éš§é“æ¨¡å¼**
   ```bash
   pnpm run dev --tunnel
   ```

---

### é—®é¢˜ï¼šä½ç½®è¿˜æ˜¯æ—§é‡‘å±±

**è§£å†³æ–¹æ¡ˆï¼š**

1. **æ£€æŸ¥ä½ç½®æƒé™**
   - è®¾ç½® â†’ éšç§ä¸å®‰å…¨æ€§ â†’ å®šä½æœåŠ¡
   - Expo Go â†’ "ä½¿ç”¨åº”ç”¨æœŸé—´" + "ç²¾ç¡®ä½ç½®"å¼€å…³æ‰“å¼€

2. **åˆ°æˆ·å¤–/çª—è¾¹**
   - GPS åœ¨å®¤å†…ä¿¡å·å¼±
   - ç­‰å¾… 30-60 ç§’

3. **é‡æ–°æˆæƒ**
   - å®Œå…¨å…³é—­ Expo Goï¼ˆä»åå°æ»‘æ‰ï¼‰
   - é‡æ–°æ‰«ç 
   - é‡æ–°æˆäºˆä½ç½®æƒé™

---

### é—®é¢˜ï¼šAPI è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆï¼š**

1. **éªŒè¯ API å¯è®¿é—®**
   ```bash
   # åœ¨æ‰‹æœºæµè§ˆå™¨è®¿é—®ï¼š
   http://192.168.1.19:3333/health
   # åº”è¯¥æ˜¾ç¤º JSON å“åº”
   ```

2. **ç¡®è®¤ API ç›‘å¬æ‰€æœ‰æ¥å£**
   ```bash
   # ç¡®ä¿ç”¨ HOST=0.0.0.0 å¯åŠ¨
   cd services/api
   HOST=0.0.0.0 PORT=3333 pnpm run dev
   ```

3. **æ£€æŸ¥ .env.local é…ç½®**
   ```bash
   # ç¡®è®¤å†…å®¹ï¼š
   cat apps/mobile/.env.local
   # åº”è¯¥æ˜¯ï¼šEXPO_PUBLIC_API_BASE_URL=http://192.168.1.19:3333
   ```

---

## ğŸ“Š å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# ç»ˆç«¯ 1ï¼šå¯åŠ¨ API
cd /Users/ming/Documents/take-a-break/services/api
HOST=0.0.0.0 PORT=3333 pnpm run dev

# ç»ˆç«¯ 2ï¼šå¯åŠ¨åº”ç”¨ï¼ˆæ¸…é™¤ç¼“å­˜ï¼‰
cd /Users/ming/Documents/take-a-break/apps/mobile
pnpm run dev --clear

# å¦‚æœç½‘ç»œé—®é¢˜ï¼Œä½¿ç”¨éš§é“ï¼š
pnpm run dev --tunnel

# æµ‹è¯• APIï¼ˆåœ¨æ‰‹æœºæµè§ˆå™¨ï¼‰ï¼š
http://192.168.1.19:3333/health

# æŸ¥çœ‹ Metro bundlerï¼ˆåœ¨æ‰‹æœºæµè§ˆå™¨ï¼‰ï¼š
http://192.168.1.19:8081
```

---

## ğŸ’¡ ä¸‹ä¸€æ­¥

æµ‹è¯•æˆåŠŸåï¼š
1. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½ï¼ˆåœ°å›¾ã€å¯¼èˆªã€è¯­éŸ³ç­‰ï¼‰
2. æµ‹è¯•è¾¹ç•Œæƒ…å†µï¼ˆæ²¡ç½‘ç»œã€GPS å¼±ç­‰ï¼‰
3. æ”¶é›†åé¦ˆå’Œä¼˜åŒ–

ç¥æµ‹è¯•é¡ºåˆ©ï¼ğŸ‰

